# 检查
程序可能会出现各种各样的异常。

- 可能是文件或者用户输入的内容导致的。
- 可能是编码错误或语言中缺少的功能。
- 当然，也可能是由于许多其他不可预知的因素。

异常无法完全避免，但是我们可以选择一些手段帮助我们检查和报告异常。

## 报告异常
我们可以在函数中的任何地方，使用`~!`来声明一个异常数据。

例如：

    ReadFile => $(name:text)~()
    {
        ? name.Length == 0
        {
            ~! Exception~(message:"something wrong");
        };
    };

这样我们就声明了一个异常，异常说明是`something wrong`，一旦外部调用者使用了不合法长度的`name`，这个异常就会向上报告，直到被处理或者忽略。
## 检查异常
我们可以在调用函数的时候，使用`!`和辅助符号`~`来检查可能会有异常的区块。

例如：

    !
    {
        ReadFile(name:"temp.txt");
    }
    ~ err
    {
        Console.WriteLine(value:err.message);
    };

在这里，`!`区块表示所有受到检查的功能逻辑，`~ err`表示将错误数据定义为标识符`err`，其作用就像入参。

一旦读取文件函数出现了异常，就会检查出`err`并执行打印功能，如果没有，则一切正常，不会进入异常处理部分的功能。

同样的，检查逻辑也在函数内，所以如果有处理不了的异常，可以继续向上报告。

例如：

    ...
    ~ err 
    { 
        ~! err; 
    };

那么我们怎么区分不同类型的异常呢？

很简单，我们已经拿到了错误，所以随时可以通过类型判断来处理。

例如:

    ~ e
    {
        ? e ?: Exception
        {
            ...
        };
    };

更复杂的可以使用子条件判断语句继续处理。

### [下一章](异步处理.md)